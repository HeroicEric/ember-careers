#!/usr/bin/env node
"use strict";
var $__getDescriptors = function(object) {
  var descriptors = {}, name, names = Object.getOwnPropertyNames(object);
  for (var i = 0; i < names.length; i++) {
    var name = names[i];
    descriptors[name] = Object.getOwnPropertyDescriptor(object, name);
  }
  return descriptors;
}, $__createClassNoExtends = function(object, staticObject) {
  var ctor = object.constructor;
  Object.defineProperty(object, 'constructor', {enumerable: false});
  ctor.prototype = object;
  Object.defineProperties(ctor, $__getDescriptors(staticObject));
  return ctor;
};
var optimist = require("optimist");
var fs = require("fs");
var path = require("path");
var through = require("through");
function extend(target) {
  for (var sources = [], $__1 = 1; $__1 < arguments.length; $__1++) sources[$__1 - 1] = arguments[$__1];
  var toString = {}.toString;
  sources.forEach(function(source) {
    for (var key in source) {
      target[key] = source[key];
    }
  });
  return target;
}
var CLI = function() {
  'use strict';
  var $CLI = ($__createClassNoExtends)({
    constructor: function(Compiler) {
      var stdin = arguments[1] !== (void 0) ? arguments[1]: process.stdin;
      var stdout = arguments[2] !== (void 0) ? arguments[2]: process.stdout;
      var fs_ = arguments[3] !== (void 0) ? arguments[3]: fs;
      this.Compiler = Compiler;
      this.stdin = stdin;
      this.stdout = stdout;
      this.fs = fs_;
    },
    start: function(argv) {
      var options = this.parseArgs(argv);
      if (options.help) {
        this.argParser(argv).showHelp();
      } else if (options.stdio) {
        this.processStdio(options);
      } else {
        for (var i = 2; i < options._.length; i++) {
          var filename = options._[i];
          this.processPath(filename, options);
        }
      }
    },
    parseArgs: function(argv) {
      var args = this.argParser(argv).argv;
      if (args.imports) {
        var imports = {};
        args.imports.split(',').forEach(function(pair) {
          var $__2 = pair.split(':'), requirePath = $__2[0], global = $__2[1];
          imports[requirePath] = global;
        });
        args.imports = imports;
      }
      if (args.global) {
        args.into = args.global;
      }
      return args;
    },
    argParser: function(argv) {
      return optimist(argv).usage('compile-modules usage:\n\n  Using files:\n    compile-modules INPUT --to DIR [--anonymous] [--type TYPE] [--imports PATH:GLOBAL]\n\n  Using stdio:\n    compile-modules --stdio [--type TYPE] [--imports PATH:GLOBAL] (--module-name MOD|--anonymous)').options({
        type: {
          "default": 'amd',
          describe: 'The type of output (one of "amd", "yui", "cjs", or "globals")'
        },
        to: {describe: 'A directory in which to write the resulting files'},
        imports: {describe: 'A list of path:global pairs, comma separated (e.g. jquery:$,ember:Ember)'},
        anonymous: {
          "default": false,
          type: 'boolean',
          describe: 'Do not include a module name'
        },
        'module-name': {
          describe: 'The name of the outputted module',
          alias: 'm'
        },
        stdio: {
          "default": false,
          type: 'boolean',
          alias: 's',
          describe: 'Use stdin and stdout to process a file'
        },
        global: {describe: 'When the type is `globals`, the name of the global to export into'},
        help: {
          "default": false,
          type: 'boolean',
          alias: 'h',
          describe: 'Shows this help message'
        }
      }).check((function($__2) {
        var type = $__2.type;
        return type === 'amd' || type === 'yui' || type === 'cjs' || type === 'globals';
      })).check((function(args) {
        return !args.anonymous || !args.m;
      })).check((function(args) {
        return (args.stdio && args.type === 'amd') ? args.anonymous || args.m || false: true;
      })).check((function(args) {
        return (args.stdio && args.type === 'yui') ? args.anonymous || args.m || false: true;
      })).check((function(args) {
        return args.stdio || args.to || args.help;
      })).check((function(args) {
        return args.imports ? args.type === 'globals': args.type !== 'globals';
      }));
    },
    processStdio: function(options) {
      this.processIO(this.stdin, this.stdout, options);
    },
    processIO: function(input, output, options) {
      try {
        throw undefined;
      } catch (end) {
        try {
          throw undefined;
        } catch (write) {
          var data = '', self = this;
          write = function(chunk) {
            data += chunk;
          };
          end = function() {
            this.queue(self._compile(data, options.m, options.type, options));
            this.queue(null);
          };
          input.pipe(through(write, end)).pipe(output);
        }
      }
    },
    processPath: function(filename, options) {
      this.fs.stat(filename, function(err, stat) {
        if (err) {
          throw new Error(err);
        } else if (stat.isDirectory()) {
          this.processDirectory(filename, options);
        } else {
          this.processFile(filename, options);
        }
      }.bind(this));
    },
    processDirectory: function(dirname, options) {
      this.fs.readdir(dirname, function(err, children) {
        if (err) {
          console.error(err.message);
          process.exit(1);
        }
        children.forEach(function(child) {
          this.processPath(path.join(dirname, child), options);
        }.bind(this));
      }.bind(this));
    },
    processFile: function(filename, options) {
      try {
        throw undefined;
      } catch (normalizePath) {
        normalizePath = function(p) {
          return p.replace(/\\/g, '/');
        };
        var ext = path.extname(filename), basenameNoExt = path.basename(filename, ext), dirname = path.dirname(filename), pathNoExt = normalizePath(path.join(dirname, basenameNoExt)), output, outputFilename = normalizePath(path.join(options.to, filename)), moduleName = options.anonymous ? null: pathNoExt;
        options = extend({}, options, {m: moduleName});
        this._mkdirp(path.dirname(outputFilename));
        this.processIO(this.fs.createReadStream(filename), this.fs.createWriteStream(outputFilename), options);
      }
    },
    _compile: function(input, moduleName, type, options) {
      var compiler, method;
      type = {
        amd: 'AMD',
        yui: 'YUI',
        cjs: 'CJS',
        globals: 'Globals'
      }[type];
      compiler = new this.Compiler(input, moduleName, options);
      method = "to" + type;
      return compiler[method]();
    },
    _mkdirp: function(directory) {
      var prefix;
      if (this.fs.existsSync(directory)) {
        return;
      }
      prefix = path.dirname(directory);
      if (prefix !== '.' && prefix !== '/') {
        this._mkdirp(prefix);
      }
      return this.fs.mkdirSync(directory);
    }
  }, {});
  return $CLI;
}();
CLI.start = function(Compiler, argv) {
  var stdin = arguments[2] !== (void 0) ? arguments[2]: process.stdin;
  var stdout = arguments[3] !== (void 0) ? arguments[3]: process.stdout;
  var fs_ = arguments[4] !== (void 0) ? arguments[4]: fs;
  return new CLI(Compiler, stdin, stdout, fs_).start(argv);
};
var fs = require('fs'), path = require('path');
function requireMain() {
  var root = path.join(__dirname, '..'), pkgPath = path.join(root, 'package.json'), pkg = JSON.parse(fs.readFileSync(pkgPath, 'utf8'));
  return require(path.join(root, pkg.main));
}
var Compiler = requireMain().Compiler;
CLI.start(Compiler, process.argv);

//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG1wL3RyYW5zcGlsZWQvY29tcGlsZS1tb2R1bGVzLmpzLmVzNiIsInNvdXJjZXMiOlsidG1wL3RyYW5zcGlsZWQvY29tcGlsZS1tb2R1bGVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQUE7dUJDQUEsU0FBQSxDQUFTLE1BQUEsQ0FBUTtBQUNMLEtBQUEsWUFBQSxFQUFjLEVBQUEsQ0FBQSxDQUFJLEtBQUEsQ0FBTSxNQUFBLEVBQVEsT0FBQSxDQUFBLG1CQUEwQixDQUFDLE1BQUEsQ0FBQTtBQUMvRCxLQUFBLEVBQVMsR0FBQSxFQUFBLEVBQUksRUFBQSxDQUFHLEVBQUEsRUFBSSxNQUFBLENBQUEsTUFBQSxDQUFjLEVBQUEsRUFBQSxDQUFLO0FBQ2pDLE9BQUEsS0FBQSxFQUFPLE1BQUEsQ0FBTSxDQUFBLENBQUE7QUFDakIsZUFBQSxDQUFZLElBQUEsQ0FBQSxFQUFRLE9BQUEsQ0FBQSx3QkFBK0IsQ0FBQyxNQUFBLENBQVEsS0FBQSxDQUFBO0FBQUE7QUFFOUQsUUFBTyxZQUFBO0FBQUEsQ0FBQSwyQkNOZixTQUFBLENBQVMsTUFBQSxDQUFRLGFBQUEsQ0FBYztBQUNyQixLQUFBLEtBQUEsRUFBTyxPQUFBLENBQUEsV0FBQTtBQUNYLFFBQUEsQ0FBQSxjQUFxQixDQUFDLE1BQUEsQ0FBUSxjQUFBLENBQWUsRUFBQyxVQUFBLENBQVksTUFBQSxDQUFBLENBQUE7QUFDMUQsTUFBQSxDQUFBLFNBQUEsRUFBaUIsT0FBQTtBQUNqQixRQUFBLENBQUEsZ0JBQXVCLENBQUMsSUFBQSxDQUFNLGtCQUFpQixDQUFDLFlBQUEsQ0FBQSxDQUFBO0FBQ2hELFFBQU8sS0FBQTtBQUFBLENBQUE7QUZKVCxHQUFBLFNBQUEsRUFBVyxRQUFPLENBQUMsVUFBQSxDQUFBO0FBQ25CLEdBQUEsR0FBQSxFQUFLLFFBQU8sQ0FBQyxJQUFBLENBQUE7QUFDYixHQUFBLEtBQUEsRUFBTyxRQUFPLENBQUMsTUFBQSxDQUFBO0FBQ2YsR0FBQSxRQUFBLEVBQVUsUUFB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QSxFQUFVLEtBQUEsQ0FBQSxLQUFVLENBQUMsRUFBQSxDQUFBLFlBQWUsQ0FBQyxPQUFBLENBQVMsT0FBQSxDQUFBLENBQUE7QUFFbEQsUUFBTyxRQUFPLENBQUMsSUFBQSxDQUFBLElBQVMsQ0FBQyxJQUFBLENBQU0sSUFBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO0FBQUE7R0FHN0IsU0FBQSxFQUFXLFlBQVcsQ0FBQSxDQUFBLENBQUEsUUFBQTtBQUUxQixHQUFBLENBQUEsS0FBUyxDQUFDLFFBQUEsQ0FBVSxRQUFBLENBQUEsSUFBQSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgb3B0aW1pc3QgPSByZXF1aXJlKFwib3B0aW1pc3RcIik7XG52YXIgZnMgPSByZXF1aXJlKFwiZnNcIik7XG52YXIgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xudmFyIHRocm91Z2ggPSByZXF1aXJlKFwidGhyb3VnaFwiKTtcblxuZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCwgLi4uc291cmNlcykge1xuICB2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxuICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oc291cmNlKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmNsYXNzIENMSSB7XG4gIGNvbnN0cnVjdG9yKENvbXBpbGVyLCBzdGRpbj1wcm9jZXNzLnN0ZGluLCBzdGRvdXQ9cHJvY2Vzcy5zdGRvdXQsIGZzXz1mcykge1xuICAgIHRoaXMuQ29tcGlsZXIgPSBDb21waWxlcjtcbiAgICB0aGlzLnN0ZGluID0gc3RkaW47XG4gICAgdGhpcy5zdGRvdXQgPSBzdGRvdXQ7XG4gICAgdGhpcy5mcyA9IGZzXztcbiAgfVxuXG4gIHN0YXJ0KGFyZ3YpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMucGFyc2VBcmdzKGFyZ3YpO1xuXG4gICAgaWYgKG9wdGlvbnMuaGVscCkge1xuICAgICAgdGhpcy5hcmdQYXJzZXIoYXJndikuc2hvd0hlbHAoKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuc3RkaW8pIHtcbiAgICAgIHRoaXMucHJvY2Vzc1N0ZGlvKG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpID0gMjsgaSA8IG9wdGlvbnMuXy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZmlsZW5hbWUgPSBvcHRpb25zLl9baV07XG4gICAgICAgIHRoaXMucHJvY2Vzc1BhdGgoZmlsZW5hbWUsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHBhcnNlQXJncyhhcmd2KSB7XG4gICAgdmFyIGFyZ3MgPSB0aGlzLmFyZ1BhcnNlcihhcmd2KS5hcmd2O1xuXG4gICAgaWYgKGFyZ3MuaW1wb3J0cykge1xuICAgICAgdmFyIGltcG9ydHMgPSB7fTtcbiAgICAgIGFyZ3MuaW1wb3J0cy5zcGxpdCgnLCcpLmZvckVhY2goZnVuY3Rpb24ocGFpcikge1xuICAgICAgICB2YXIgW3JlcXVpcmVQYXRoLCBnbG9iYWxdID0gcGFpci5zcGxpdCgnOicpO1xuICAgICAgICBpbXBvcnRzW3JlcXVpcmVQYXRoXSA9IGdsb2JhbDtcbiAgICAgIH0pO1xuICAgICAgYXJncy5pbXBvcnRzID0gaW1wb3J0cztcbiAgICB9XG5cbiAgICBpZiAoYXJncy5nbG9iYWwpIHtcbiAgICAgIGFyZ3MuaW50byA9IGFyZ3MuZ2xvYmFsO1xuICAgIH1cblxuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgYXJnUGFyc2VyKGFyZ3YpIHtcbiAgICByZXR1cm4gb3B0aW1pc3QoYXJndikudXNhZ2UoJ2NvbXBpbGUtbW9kdWxlcyB1c2FnZTpcXG5cXG4gIFVzaW5nIGZpbGVzOlxcbiAgICBjb21waWxlLW1vZHVsZXMgSU5QVVQgLS10byBESVIgWy0tYW5vbnltb3VzXSBbLS10eXBlIFRZUEVdIFstLWltcG9ydHMgUEFUSDpHTE9CQUxdXFxuXFxuICBVc2luZyBzdGRpbzpcXG4gICAgY29tcGlsZS1tb2R1bGVzIC0tc3RkaW8gWy0tdHlwZSBUWVBFXSBbLS1pbXBvcnRzIFBBVEg6R0xPQkFMXSAoLS1tb2R1bGUtbmFtZSBNT0R8LS1hbm9ueW1vdXMpJykub3B0aW9ucyh7XG4gICAgICB0eXBlOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiAnYW1kJyxcbiAgICAgICAgZGVzY3JpYmU6ICdUaGUgdHlwZSBvZiBvdXRwdXQgKG9uZSBvZiBcImFtZFwiLCBcInl1aVwiLCBcImNqc1wiLCBvciBcImdsb2JhbHNcIiknXG4gICAgICB9LFxuICAgICAgdG86IHtcbiAgICAgICAgZGVzY3JpYmU6ICdBIGRpcmVjdG9yeSBpbiB3aGljaCB0byB3cml0ZSB0aGUgcmVzdWx0aW5nIGZpbGVzJ1xuICAgICAgfSxcbiAgICAgIGltcG9ydHM6IHtcbiAgICAgICAgZGVzY3JpYmU6ICdBIGxpc3Qgb2YgcGF0aDpnbG9iYWwgcGFpcnMsIGNvbW1hIHNlcGFyYXRlZCAoZS5nLiBqcXVlcnk6JCxlbWJlcjpFbWJlciknXG4gICAgICB9LFxuICAgICAgYW5vbnltb3VzOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiBmYWxzZSxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICBkZXNjcmliZTogJ0RvIG5vdCBpbmNsdWRlIGEgbW9kdWxlIG5hbWUnXG4gICAgICB9LFxuICAgICAgJ21vZHVsZS1uYW1lJzoge1xuICAgICAgICBkZXNjcmliZTogJ1RoZSBuYW1lIG9mIHRoZSBvdXRwdXR0ZWQgbW9kdWxlJyxcbiAgICAgICAgYWxpYXM6ICdtJ1xuICAgICAgfSxcbiAgICAgIHN0ZGlvOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiBmYWxzZSxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICBhbGlhczogJ3MnLFxuICAgICAgICBkZXNjcmliZTogJ1VzZSBzdGRpbiBhbmQgc3Rkb3V0IHRvIHByb2Nlc3MgYSBmaWxlJ1xuICAgICAgfSxcbiAgICAgIGdsb2JhbDoge1xuICAgICAgICBkZXNjcmliZTogJ1doZW4gdGhlIHR5cGUgaXMgYGdsb2JhbHNgLCB0aGUgbmFtZSBvZiB0aGUgZ2xvYmFsIHRvIGV4cG9ydCBpbnRvJ1xuICAgICAgfSxcbiAgICAgIGhlbHA6IHtcbiAgICAgICAgXCJkZWZhdWx0XCI6IGZhbHNlLFxuICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgICAgIGFsaWFzOiAnaCcsXG4gICAgICAgIGRlc2NyaWJlOiAnU2hvd3MgdGhpcyBoZWxwIG1lc3NhZ2UnXG4gICAgICB9XG4gICAgfSkuY2hlY2soKHt0eXBlfSkgPT4gdHlwZSA9PT0gJ2FtZCcgfHwgdHlwZSA9PT0gJ3l1aScgfHwgdHlwZSA9PT0gJ2NqcycgfHwgdHlwZSA9PT0gJ2dsb2JhbHMnKVxuICAgIC5jaGVjayhhcmdzID0+ICFhcmdzLmFub255bW91cyB8fCAhYXJncy5tKVxuICAgIC5jaGVjayhhcmdzID0+IChhcmdzLnN0ZGlvICYmIGFyZ3MudHlwZSA9PT0gJ2FtZCcpID8gYXJncy5hbm9ueW1vdXMgfHwgYXJncy5tIHx8IGZhbHNlIDogdHJ1ZSlcbiAgICAuY2hlY2soYXJncyA9PiAoYXJncy5zdGRpbyAmJiBhcmdzLnR5cGUgPT09ICd5dWknKSA/IGFyZ3MuYW5vbnltb3VzIHx8IGFyZ3MubSB8fCBmYWxzZSA6IHRydWUpXG4gICAgLmNoZWNrKGFyZ3MgPT4gYXJncy5zdGRpbyB8fCBhcmdzLnRvIHx8IGFyZ3MuaGVscClcbiAgICAuY2hlY2soYXJncyA9PiBhcmdzLmltcG9ydHMgPyBhcmdzLnR5cGUgPT09ICdnbG9iYWxzJyA6IGFyZ3MudHlwZSAhPT0gJ2dsb2JhbHMnKTtcbiAgfVxuXG4gIHByb2Nlc3NTdGRpbyhvcHRpb25zKSB7XG4gICAgdGhpcy5wcm9jZXNzSU8odGhpcy5zdGRpbiwgdGhpcy5zdGRvdXQsIG9wdGlvbnMpO1xuICB9XG5cbiAgcHJvY2Vzc0lPKGlucHV0LCBvdXRwdXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgZGF0YSA9ICcnLFxuICAgICAgICBzZWxmID0gdGhpcztcblxuICAgIGZ1bmN0aW9uIHdyaXRlKGNodW5rKSB7XG4gICAgICBkYXRhICs9IGNodW5rO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVuZCgpIHtcbiAgICAgIC8qIGpzaGludCAtVzA0MCAqL1xuICAgICAgdGhpcy5xdWV1ZShzZWxmLl9jb21waWxlKGRhdGEsIG9wdGlvbnMubSwgb3B0aW9ucy50eXBlLCBvcHRpb25zKSk7XG4gICAgICB0aGlzLnF1ZXVlKG51bGwpO1xuICAgIH1cblxuICAgIGlucHV0LnBpcGUodGhyb3VnaCh3cml0ZSwgZW5kKSkucGlwZShvdXRwdXQpO1xuICB9XG5cbiAgcHJvY2Vzc1BhdGgoZmlsZW5hbWUsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmZzLnN0YXQoZmlsZW5hbWUsIGZ1bmN0aW9uKGVyciwgc3RhdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdC5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc0RpcmVjdG9yeShmaWxlbmFtZSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByb2Nlc3NGaWxlKGZpbGVuYW1lLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9LmJpbmQodGhpcykpO1xuICB9XG5cbiAgcHJvY2Vzc0RpcmVjdG9yeShkaXJuYW1lLCBvcHRpb25zKSB7XG4gICAgdGhpcy5mcy5yZWFkZGlyKGRpcm5hbWUsIGZ1bmN0aW9uKGVyciwgY2hpbGRyZW4pIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH1cbiAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzUGF0aChwYXRoLmpvaW4oZGlybmFtZSwgY2hpbGQpLCBvcHRpb25zKTtcbiAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHByb2Nlc3NGaWxlKGZpbGVuYW1lLCBvcHRpb25zKSB7XG4gICAgZnVuY3Rpb24gbm9ybWFsaXplUGF0aChwKSB7XG4gICAgICByZXR1cm4gcC5yZXBsYWNlKC9cXFxcL2csICcvJyk7XG4gICAgfVxuXG4gICAgdmFyIGV4dCAgICAgICAgICAgID0gcGF0aC5leHRuYW1lKGZpbGVuYW1lKSxcbiAgICAgICAgYmFzZW5hbWVOb0V4dCAgPSBwYXRoLmJhc2VuYW1lKGZpbGVuYW1lLCBleHQpLFxuICAgICAgICBkaXJuYW1lICAgICAgICA9IHBhdGguZGlybmFtZShmaWxlbmFtZSksXG4gICAgICAgIHBhdGhOb0V4dCAgICAgID0gbm9ybWFsaXplUGF0aChwYXRoLmpvaW4oZGlybmFtZSwgYmFzZW5hbWVOb0V4dCkpLFxuICAgICAgICBvdXRwdXQsXG4gICAgICAgIG91dHB1dEZpbGVuYW1lID0gbm9ybWFsaXplUGF0aChwYXRoLmpvaW4ob3B0aW9ucy50bywgZmlsZW5hbWUpKSxcbiAgICAgICAgbW9kdWxlTmFtZSAgICAgPSBvcHRpb25zLmFub255bW91cyA/IG51bGwgOiBwYXRoTm9FeHQ7XG5cbiAgICBvcHRpb25zID0gZXh0ZW5kKHt9LCBvcHRpb25zLCB7bTogbW9kdWxlTmFtZX0pO1xuICAgIHRoaXMuX21rZGlycChwYXRoLmRpcm5hbWUob3V0cHV0RmlsZW5hbWUpKTtcblxuICAgIHRoaXMucHJvY2Vzc0lPKFxuICAgICAgdGhpcy5mcy5jcmVhdGVSZWFkU3RyZWFtKGZpbGVuYW1lKSxcbiAgICAgIHRoaXMuZnMuY3JlYXRlV3JpdGVTdHJlYW0ob3V0cHV0RmlsZW5hbWUpLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gIH1cblxuICBfY29tcGlsZShpbnB1dCwgbW9kdWxlTmFtZSwgdHlwZSwgb3B0aW9ucykge1xuICAgIHZhciBjb21waWxlciwgbWV0aG9kO1xuICAgIHR5cGUgPSB7XG4gICAgICBhbWQ6ICdBTUQnLFxuICAgICAgeXVpOiAnWVVJJyxcbiAgICAgIGNqczogJ0NKUycsXG4gICAgICBnbG9iYWxzOiAnR2xvYmFscydcbiAgICB9W3R5cGVdO1xuICAgIGNvbXBpbGVyID0gbmV3IHRoaXMuQ29tcGlsZXIoaW5wdXQsIG1vZHVsZU5hbWUsIG9wdGlvbnMpO1xuICAgIG1ldGhvZCA9IFwidG9cIiArIHR5cGU7XG4gICAgcmV0dXJuIGNvbXBpbGVyW21ldGhvZF0oKTtcbiAgfVxuXG4gIF9ta2RpcnAoZGlyZWN0b3J5KSB7XG4gICAgdmFyIHByZWZpeDtcbiAgICBpZiAodGhpcy5mcy5leGlzdHNTeW5jKGRpcmVjdG9yeSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcHJlZml4ID0gcGF0aC5kaXJuYW1lKGRpcmVjdG9yeSk7XG4gICAgaWYgKHByZWZpeCAhPT0gJy4nICYmIHByZWZpeCAhPT0gJy8nKSB7XG4gICAgICB0aGlzLl9ta2RpcnAocHJlZml4KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZnMubWtkaXJTeW5jKGRpcmVjdG9yeSk7XG4gIH1cbn1cblxuQ0xJLnN0YXJ0ID0gZnVuY3Rpb24oQ29tcGlsZXIsIGFyZ3YsIHN0ZGluPXByb2Nlc3Muc3RkaW4sIHN0ZG91dD1wcm9jZXNzLnN0ZG91dCwgZnNfPWZzKSB7XG4gIHJldHVybiBuZXcgQ0xJKENvbXBpbGVyLCBzdGRpbiwgc3Rkb3V0LCBmc18pLnN0YXJ0KGFyZ3YpO1xufTtcblxubGV0IGZzICAgPSByZXF1aXJlKCdmcycpLFxuICAgIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbmZ1bmN0aW9uIHJlcXVpcmVNYWluKCkge1xuICB2YXIgcm9vdCAgICA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicpLFxuICAgICAgcGtnUGF0aCA9IHBhdGguam9pbihyb290LCAncGFja2FnZS5qc29uJyksXG4gICAgICBwa2cgICAgID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMocGtnUGF0aCwgJ3V0ZjgnKSk7XG5cbiAgcmV0dXJuIHJlcXVpcmUocGF0aC5qb2luKHJvb3QsIHBrZy5tYWluKSk7XG59XG5cbmxldCBDb21waWxlciA9IHJlcXVpcmVNYWluKCkuQ29tcGlsZXI7XG5cbkNMSS5zdGFydChDb21waWxlciwgcHJvY2Vzcy5hcmd2KTtcbiJdfQ==